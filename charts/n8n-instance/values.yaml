# n8n version configuration
n8nVersion: "latest"

# Deployment mode
queueMode: true  # true = queue mode, false = regular mode

# Database configuration (always isolated)
database:
  image: postgres:16
  storage:
    size: 10Gi
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  # Snapshot restore configuration
  snapshot:
    enabled: false          # Set to true to restore from snapshot
    name: ""                # Snapshot filename (e.g., "test-data-v1.sql")
    sourceNamespace: "n8n-system"  # Where backup-storage PVC is mounted

# Redis configuration (only used in queue mode)
redis:
  host: redis.n8n-system.svc.cluster.local
  port: 6379

# Replica configuration
replicas:
  workers: 2  # Number of worker pods (queue mode only)

# Service configuration
service:
  type: NodePort
  port: 5678
  nodePort: null  # Auto-calculated if null

# Resource limits
resources:
  main:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  worker:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  webhook:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi

# n8n configuration
n8nConfig:
  encryptionKey: "defaultEncryptionKeyChangeMe"
  timezone: "America/New_York"
  webhookUrl: ""  # Auto-generated if empty

# Extra environment variables (added via UI)
extraEnv: {}
