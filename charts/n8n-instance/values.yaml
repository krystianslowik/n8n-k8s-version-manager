# n8n version configuration
n8nVersion: "latest"

# Deployment mode
queueMode: true  # true = queue mode, false = regular mode

# Database configuration
isolatedDB: false  # true = dedicated DB, false = shared DB

database:
  # Used when isolatedDB=false (shared database)
  shared:
    host: postgres.n8n-system.svc.cluster.local
    port: 5432
    database: n8n
    username: admin
    password: changeme123  # Should match infrastructure chart

  # Used when isolatedDB=true (isolated database)
  isolated:
    image: postgres:16
    storage:
      size: 10Gi
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi

# Redis configuration (only used in queue mode)
redis:
  host: redis.n8n-system.svc.cluster.local
  port: 6379

# Replica configuration
replicas:
  workers: 2  # Number of worker pods (queue mode only)

# Service configuration
service:
  type: NodePort
  port: 5678
  nodePort: null  # Auto-calculated if null

# Resource limits
resources:
  main:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  worker:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  webhook:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi

# n8n configuration
n8nConfig:
  encryptionKey: "defaultEncryptionKeyChangeMe"
  timezone: "America/New_York"
  webhookUrl: ""  # Auto-generated if empty
